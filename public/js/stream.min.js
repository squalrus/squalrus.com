var ActivityStream=function(){this.stream=[],this.html=""};ActivityStream.prototype.push=function(a){this.stream.push(a)},ActivityStream.prototype.toString=function(){this.stream.sort(function(a,b){return parseFloat(b.id)-parseFloat(a.id)});for(var a=0;a<this.stream.length;a++)this.html+=this.stream[a].toString();return this.html};var ActivityItem=function(a,b){this.id=+a,this.html=b};ActivityItem.prototype.toString=function(){return this.html},ActivityStream.prototype.github=function(){var a,b="https://api.github.com/users/squalrus/events",c="https://github.com/",d=[];return a=function(a){for(var b=0;b<a.length;b++){var c=a[b].payload,e=a[b].repo,f=new Date(a[b].created_at);d[a[b].type]?this.stream.push(new ActivityItem(f,'<article class="activity-entry github"><i class="icon-github icon-activity"></i><div class="activity-content">'+d[a[b].type](c,e)+'<time class="date" datetime="'+f+'">'+f+"</time></div></article>")):console.log("event:"+a[b].type)}},d.PushEvent=function(a,b){var d=1===a.commits.length?"commit":"commits";return'<span class="keyword">pushed</span> <code>'+a.commits.length+" "+d+'</code> to <a href="'+c+b.name+'" target="_blank">'+b.name+"</a>"},d.FollowEvent=function(a){return'<span class="keyword">followed</span> <a href="'+a.target.html_url+'" target="_blank">'+a.target.login+"</a>"},d.WatchEvent=function(a,b){return'<span class="keyword">starred</span> <a href="'+c+b.name+'" target="_blank">'+b.name+"</a>"},d.CreateEvent=function(a,b){return'<span class="keyword">created</span> <code>'+a.ref+" "+a.ref_type+'</code> <a href="'+c+b.name+'" target="_blank">'+b.name+"</a>"},d.IssuesEvent=function(a,b){return'<span class="keyword">created issue</span> in repo <a href="'+c+b.name+'" target="_blank">'+b.name+'</a> <span class="quote">'+a.issue.title+"</span>"},d.IssueCommentEvent=function(a,b){return'<span class="keyword">commented</span> in repo <a href="'+c+b.name+'" target="_blank">'+b.name+'</a> <span class="quote">'+a.issue.title+"</span>"},d.PullRequestEvent=function(a,b){return'<span class="keyword">pull request</span> on <a href="'+c+b.name+'" target="_blank">'+b.name+'</a> <span class="quote">'+a.pull_request.body+"</span>"},$.ajax({url:b,success:function(b){a(b)}})},ActivityStream.prototype.twitter=function(){var a,b,c="http://search.twitter.com/search.json?callback=?&q=chadschulz";return a=function(a){for(var a=a.results,c=0;c<a.length;c++){var d=new Date(a[c].created_at);this.stream.push(new ActivityItem(d,'<div class="activity-entry twitter"><i class="icon-twitter icon-activity"></i><div class="activity-content">'+b(a[c].text)+'<span class="date">'+d+"</span></div></div>"))}},b=function(a){var b='$1<a href="http://www.twitter.com/$2" target="_blank">@$2</a>',c='<a href="$1" target="_blank">$1</a>',d='$1<a href="http://search.twitter.com/search?q=%23$2" target="_blank">#$2</a>',e=/(^|[^@\w])@(\w{1,15})\b/g,f=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i,g=/(^|\s)#(\w+)/g;return a=a.replace(f,c),a=a.replace(g,d),a=a.replace(e,b)},$.ajax({url:c,dataType:"json",success:function(b){a(b)},error:function(){console.log("oops")}})},ActivityStream.prototype.tumblr=function(){var a,b,c="http://chadschulz.tumblr.com/api/read/json";return a=function(a){for(var a=a.posts,c=0;c<a.length;c++){var d=new Date(a[c].date);this.stream.push(new ActivityItem(d,'<div class="activity-entry tumblr"><i class="icon-tumblr icon-activity"></i><div class="activity-content">'+b(a[c])+'<span class="date">'+d+"</span></div></div>"))}},b=function(a){return a["regular-title"]+" "+a["regular-body"]},$.ajax({url:c,dataType:"jsonp",success:function(b){a(b)}})};